---
title: 点云渲染
atomId: PointCloud
package: three
description: 基于 Three.js 的海量点云渲染组件，支持分块加载、框选高亮和 BVH 加速
group:
  title: 3D可视化
---

# 点云渲染

> 基于 Three.js 实现的海量点云渲染组件，支持千万级点云实时渲染、分块管理、框选筛选等功能。

## 功能特性

- 🚀 **海量点云**：支持 500 万 ~ 5000 万点的高性能渲染
- 📦 **分块加载**：智能分块管理，可配置每块点数（1 万 ~ 20 万/块）
- 🎯 **框选筛选**：支持鼠标框选点云区域进行筛选
- ⚡ **BVH 加速**：基于 BVH（Bounding Volume Hierarchy）的快速空间查询
- 🎨 **高亮模式**：支持逐点高亮和整块高亮两种模式
- 🔍 **调试视图**：可视化显示分块边界框
- 📊 **实时统计**：显示点数、分块数、选中数等信息

## 技术架构

```txt
┌─────────────────────────────────────────────────────────┐
│                   PointCloudManager                      │
├─────────────────────────────────────────────────────────┤
│  ├── ChunkUtils          // 分块工具                     │
│  │   ├── 按空间位置分块                                   │
│  │   └── 每块独立 BufferGeometry                         │
│  ├── SelectionManager    // 选择管理器                   │
│  │   ├── 框选转屏幕空间                                   │
│  │   ├── BVH / 全量筛选                                  │
│  │   └── 高亮点/块                                       │
│  └── SceneSetup          // 场景配置                     │
│      ├── WebGLRenderer                                   │
│      ├── OrbitControls                                   │
│      └── 动态背景色                                       │
└─────────────────────────────────────────────────────────┘
```

## 参数说明

| 参数 | 描述 | 类型 | 默认值 |
| --- | --- | --- | --- |
| pointCount | 点云总数量 | `number` | `10,000,000` |
| chunkSize | 每块点数 | `number` | `100,000` |
| filterMode | 筛选模式 | `'bvh' \| 'full'` | `'bvh'` |
| selectMode | 是否启用框选 | `boolean` | `true` |
| highlightMode | 高亮模式 | `'points' \| 'chunk'` | `'points'` |
| showChunkDebug | 显示分块边界 | `boolean` | `false` |

## 使用示例

```tsx | pure
import PointCloud from '@/views/compo/point-cloud';

// 基本用法 - 直接路由访问
// 路由：/compo/point-cloud

// 组件内部可配置参数：
// - 点数量：500万 / 1000万 / 2000万 / 3000万 / 5000万
// - 分块大小：1万/块 / 5万/块 / 10万/块 / 20万/块
// - 筛选模式：BVH（加速） / 全量
// - 高亮模式：逐点高亮 / 整块高亮
```

## 交互说明

| 操作 | 说明 |
| --- | --- |
| 左键拖拽 | 旋转视角 |
| 右键拖拽 | 平移视角 |
| 滚轮 | 缩放 |
| 左键框选 | 选择框内点云（需开启框选模式） |

## 性能指标

| 点数 | 分块数 | 初始化时间 | 帧率 |
| --- | --- | --- | --- |
| 500 万 | 50 块 | ~200ms | 60 FPS |
| 1000 万 | 100 块 | ~400ms | 55+ FPS |
| 2000 万 | 200 块 | ~800ms | 45+ FPS |
| 5000 万 | 500 块 | ~2s | 30+ FPS |

> 测试环境：GTX 1060 / Chrome 120 / 1080p
